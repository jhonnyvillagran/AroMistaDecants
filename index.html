<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Meta Tags -->
    <title>AroMista Decants - Tu Perfumería de Muestras</title>
    <meta name="description" content="Explora fragancias de lujo sin comprar la botella completa. Decants 100% originales para que descubras tu aroma perfecto.">
    <meta name="keywords" content="decants, perfumes, muestras, 5ml, 10ml, fragancias, perfumería, online, lujo, mejor precio">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #D4AF37; --primary-dark: #B8941F; --secondary: #8B4B8C; --accent: #E6B800; --dark: #1A1A1A;
            --darker: #0F0F0F; --light: #F5F5F5; --success: #228B22; --warning: #DAA520; --danger: #8B0000;
            --transition: all 0.3s ease; --shadow: 0 0 15px rgba(212, 175, 55, 0.3); --shadow-lg: 0 0 25px rgba(212, 175, 55, 0.5);
            --border-radius: 8px; --bg-primary: #1A1A1A; --bg-secondary: #2A2A2A; --text-primary: #F5F5F5; --text-secondary: #C0C0C0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: var(--text-primary); background-color: var(--bg-primary); overflow-x: hidden; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .btn { display: inline-block; padding: 12px 24px; border: none; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); text-align: center; font-size: 1rem; position: relative; overflow: hidden; box-shadow: var(--shadow); }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: var(--dark); border: 1px solid var(--primary); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-whatsapp-inquiry { background: linear-gradient(135deg, #25D366, #1DA851); color: white; border: 1px solid #25D366; margin-top: 15px; box-shadow: var(--shadow); width: 100%; }
        .btn-whatsapp-inquiry i { margin-right: 8px; }
        .header { position: fixed; top: 0; left: 0; width: 100%; background-color: rgba(26, 26, 26, 0.95); box-shadow: var(--shadow); z-index: 1000; padding: 15px 0; backdrop-filter: blur(10px); border-bottom: 1px solid rgba(212, 175, 55, 0.3); }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo-img { height: 50px; width: 50px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); }
        .nav ul { display: flex; gap: 30px; align-items: center; }
        .nav a { font-weight: 600; position: relative; padding: 5px 0; color: var(--text-primary); }
        .nav a:hover { color: var(--primary); }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .cart-btn { background: none; border: none; font-size: 1.3rem; cursor: pointer; position: relative; color: var(--text-primary); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(212, 175, 55, 0.3); }
        .cart-count { position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; font-size: 0.7rem; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .main-content { padding-top: 80px; }
        .hero { height: 100vh; background: linear-gradient(rgba(26, 26, 26, 0.7), rgba(26, 26, 26, 0.8)), url('perfume-banner.jpg') center/cover; display: flex; align-items: center; justify-content: center; text-align: center; color: white; margin-top: -80px; }
        .hero-content { max-width: 700px; padding: 0 20px; }
        .hero-title { font-size: 3rem; margin-bottom: 15px; background: linear-gradient(90deg, var(--primary), var(--secondary)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .hero-subtitle { font-size: 1.3rem; margin-bottom: 25px; color: var(--light); }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 50px; padding-top: 80px; }
        .about-content { text-align: center; max-width: 800px; margin: 0 auto; color: var(--text-secondary); line-height: 1.8; }
        .about-content span { color: var(--primary); font-weight: 600; }
        .products { padding: 80px 0; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: var(--bg-secondary); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); transition: var(--transition); display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); }
        .product-carousel { height: 300px; position: relative; background-color: var(--darker); overflow: hidden; cursor: pointer; }
        .carousel-container { display: flex; height: 100%; }
        .carousel-slide { min-width: 100%; height: 100%; display:flex; align-items:center; justify-content:center; position: relative; overflow: hidden; }
        .carousel-slide::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; filter: blur(15px); transform: scale(1.2); opacity: 0.7; z-index: 1; background-image: var(--bg-img); }
        .carousel-slide img { width: 100%; height: 100%; object-fit: contain; position: relative; z-index: 2; }
        .product-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-title { font-size: 1.3rem; margin-bottom: 10px; cursor: pointer; }
        .product-title:hover { color: var(--primary); }
        .product-description { color: var(--text-secondary); margin-bottom: 15px; font-size: 0.9rem; flex-grow: 1; }
        .product-pricing { margin-top: auto; padding-top: 15px; border-top: 1px solid rgba(212, 175, 55, 0.1); }
        .price-option { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .price-label { font-weight: 600; font-size: 1.1rem; }
        .price-value { color: var(--primary); font-weight: 700; }
        .price-add-btn { background: var(--primary-dark); color: white; border: none; padding: 6px 12px; border-radius: var(--border-radius); cursor: pointer; font-size: 0.9rem; }
        .price-add-btn:hover { background: var(--primary); }
        #product-detail-view .container { padding: 40px 0; }
        #product-detail-view .product-carousel { height: 480px; }
        .product-detail-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: flex-start; }
        .product-detail-title { font-size: 2.8rem; margin-bottom: 15px; color: var(--primary); }
        .product-detail-description { color: var(--text-secondary); margin-bottom: 30px; line-height: 1.7; }
        .back-to-products { display: inline-block; margin-bottom: 30px; color: var(--primary); }
        .page-view { padding: 40px 0; }
        .page-content { background: var(--bg-secondary); padding: 40px; }
        .faq-item { margin-bottom: 10px; }
        .faq-question { background: var(--dark); padding: 15px; cursor: pointer; }
        .faq-answer { padding: 0 15px; max-height: 0; overflow: hidden; transition: all 0.3s ease; }
        .faq-item.active .faq-answer { max-height: 200px; padding: 15px; }
        .cart-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 2000; opacity: 0; visibility: hidden; justify-content: flex-end; display: flex; }
        .cart-overlay.active { opacity: 1; visibility: visible; }
        .cart { background: var(--bg-primary); width: 100%; max-width: 450px; height: 100%; display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.3s ease; }
        .cart-overlay.active .cart { transform: translateX(0); }
        .cart-header { padding: 20px; border-bottom: 1px solid var(--primary); display: flex; justify-content: space-between; align-items: center; }
        .cart-items { flex: 1; overflow-y: auto; padding: 10px; }
        .cart-item { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
        .cart-item-info { flex: 1; padding: 0 10px; }
        .cart-item-title { font-weight: 600; }
        .cart-item-size { font-size: 0.9em; color: var(--text-secondary); }
        .cart-footer { padding: 20px; border-top: 1px solid var(--primary); }
        .notification { position: fixed; bottom: 20px; right: 20px; background-color: var(--success); color: white; padding: 15px; border-radius: 5px; z-index: 3000; opacity: 0; transform: translateY(20px); transition: all 0.3s ease; }
        .notification.show { opacity: 1; transform: translateY(0); }
        .placeholder { text-align: center; color: var(--text-secondary); padding: 40px; }
        @media (max-width: 768px) { .product-detail-layout { grid-template-columns: 1fr; } .nav ul { display:none; } }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="#"><img src="Logo.png" alt="AroMista Logo" class="logo-img"></a>
            <nav class="nav" id="main-nav">
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#productos">Decants</a></li>
                    <li><a href="#nosotros">Nosotros</a></li>
                    <li><a href="#/faq">FAQ</a></li>
                    <li><a href="https://armomista.netlify.app/" target="_blank" rel="noopener noreferrer">Tienda Principal</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button class="cart-btn" id="cart-btn" aria-label="Carrito"><i class="fas fa-shopping-cart"></i><span class="cart-count">0</span></button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div id="main-view" class="view active">
            <section class="hero"><div class="hero-content"><h2 class="hero-title">AROMISTA DECANTS</h2><p class="hero-subtitle">Descubre fragancias de lujo en el tamaño perfecto. Muestras 100% originales para explorar tu nuevo aroma favorito.</p><a href="#productos" class="btn btn-primary">Ver Decants</a></div></section>
            <section id="nosotros" style="padding: 80px 0; background: var(--bg-secondary);"><div class="container"><h2 class="section-title">Sobre AroMista</h2><div class="about-content"><p>Somos <span>AroMista</span>, una empresa uruguaya de ventas online, apasionada por las fragancias y dedicada a hacer que los mejores aromas del mundo sean accesibles para todos en Uruguay.</p><p>Nuestra línea de <strong>Decants</strong> nace de esa misma misión: darte la oportunidad de explorar perfumes de alta gama de manera económica y práctica. Creemos que todos merecen encontrar su fragancia perfecta sin tener que comprar una botella completa a ciegas.</p><a href="https://armomista.netlify.app/" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="margin-top: 15px;">Visitar Tienda Principal</a></div></div></section>
            <section class="products" id="productos"><div class="container"><h2 class="section-title">Nuestros Decants</h2><div class="products-grid" id="products-container"></div></div></section>
        </div>
        <div id="product-detail-view" class="view"></div>
        <div id="faq-view" class="view"><div class="container page-view"><h2 class="section-title">Preguntas Frecuentes</h2><a href="#" class="back-to-products"><i class="fas fa-arrow-left"></i> Volver</a><div class="page-content"><div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><h4>🤔 ¿Qué es un decant?</h4></div><div class="faq-answer"><p>Un decant es una muestra 100% original de un perfume, extraída a un atomizador más pequeño. Es ideal para probar fragancias antes de comprar la botella completa.</p></div></div><div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><h4>💧 ¿De qué tamaño son?</h4></div><div class="faq-answer"><p>Ofrecemos tamaños de 5ml (aprox. 75 sprays) y 10ml (aprox. 150 sprays), perfectos para probar a fondo una fragancia o para viajar.</p></div></div></div></div></div>
    </main>

    <div class="cart-overlay" id="cart-overlay">
        <div class="cart">
            <div class="cart-header"><h3>Tu Carrito</h3><button class="close-cart" id="close-cart" style="background:none; border:none; font-size:1.5rem; color:white; cursor:pointer;">&times;</button></div>
            <div class="cart-items" id="cart-items"></div>
            <div class="cart-footer"><div class="cart-total" style="text-align:right; margin-bottom:15px;"><strong>Total: $<span id="cart-total">0.00</span></strong></div><button class="btn btn-primary" id="checkout-btn" style="width:100%;">Finalizar Compra</button></div>
        </div>
    </div>
    
    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwYKiXksvzlkjzT8djzjLJf4eX4Azt5tfGyf0TYmXKFyNEae78obo9a_l4Q17fyl7pM4A/exec';

        let products = [];
        let cart = [];
        const views = document.querySelectorAll('.view');
        const productsContainer = document.getElementById('products-container');
        const cartBtn = document.getElementById('cart-btn');
        const cartOverlay = document.getElementById('cart-overlay');
        const closeCart = document.getElementById('close-cart');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.querySelector('.cart-count');
        const checkoutBtn = document.getElementById('checkout-btn');
        const productDetailView = document.getElementById('product-detail-view');
        const WHATSAPP_NUMBER = '59894991600';

        function getPrice(priceValue) {
            if (priceValue === null || priceValue === undefined || priceValue === '') return 0;
            if (typeof priceValue === 'number') return priceValue;
            const cleanString = String(priceValue).replace(/[^0-9,.]/g, '').replace(',', '.');
            const numericValue = parseFloat(cleanString);
            return isNaN(numericValue) ? 0 : numericValue;
        }

        function saveCartToLocalStorage() { localStorage.setItem('aroMistaDecantsCart', JSON.stringify(cart)); }
        function loadCartFromLocalStorage() {
            const savedCart = localStorage.getItem('aroMistaDecantsCart');
            if (savedCart) { cart = JSON.parse(savedCart); }
        }
        
        async function fetchProducts() {
            try {
                productsContainer.innerHTML = `<p class="placeholder">Cargando decants...</p>`;
                const response = await fetch(SCRIPT_URL);
                if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);
                const data = await response.json();
                if (Array.isArray(data)) { products = data; } 
                else { products = []; console.error("La respuesta del script no es un array válido:", data); }
                handleRouteChange();
            } catch (error) {
                productsContainer.innerHTML = `<p class="placeholder">No se pudieron cargar los decants. Verifica la URL del script y la conexión.</p>`;
            }
        }
        
        function handleRouteChange() {
            const hash = location.hash || '#';
            views.forEach(view => view.classList.remove('active'));
            if (hash.startsWith('#/producto/')) {
                renderProductDetail(hash.split('/')[2]);
                productDetailView.classList.add('active');
            } else {
                renderProducts();
                document.getElementById('main-view').classList.add('active');
            }
            window.scrollTo(0, 0);
        }
        
        function renderProducts() {
            if (!products || products.length === 0) { productsContainer.innerHTML = `<p class="placeholder">No se encontraron decants.</p>`; return; }
            productsContainer.innerHTML = products.map(product => {
                const price5ml = getPrice(product.price5ml);
                const price10ml = getPrice(product.price10ml);
                let pricingHTML = '';

                if (price5ml > 0) {
                    pricingHTML += `<div class="price-option"><span class="price-label">5ml - <span class="price-value">$${price5ml}</span></span><button class="price-add-btn" data-id="${product.id}" data-size="5ml" data-price="${price5ml}">Agregar</button></div>`;
                }
                if (price10ml > 0) {
                    pricingHTML += `<div class="price-option"><span class="price-label">10ml - <span class="price-value">$${price10ml}</span></span><button class="price-add-btn" data-id="${product.id}" data-size="10ml" data-price="${price10ml}">Agregar</button></div>`;
                }
                const imageUrl = (product.images && product.images[0]) ? product.images[0] : '';
                return `
                <div class="product-card">
                    <a href="#/producto/${product.id}">
                        <div class="product-carousel">
                            <div class="carousel-container">
                                <div class="carousel-slide" style="--bg-img: url('${imageUrl}')">
                                    <img src="${imageUrl}" alt="${product.name}">
                                </div>
                            </div>
                        </div>
                    </a>
                    <div class="product-info">
                        <a href="#/producto/${product.id}"><h3 class="product-title">${product.name}</h3></a>
                        <p class="product-description">${(product.description || '').substring(0, 80)}...</p>
                        <div class="product-pricing">${pricingHTML || '<p class="placeholder" style="font-size:0.9rem;padding:10px 0;">Consulta por este producto.</p>'}</div>
                    </div>
                </div>`;
            }).join('');
        }
        
        function renderProductDetail(productId) {
            const product = products.find(p => p.id == productId);
            if (!product) { productDetailView.innerHTML = `<p class="placeholder">Producto no encontrado</p>`; return; }

            const price5ml = getPrice(product.price5ml);
            const price10ml = getPrice(product.price10ml);
            let pricingHTML = '';

            if (price5ml > 0) {
                pricingHTML += `<div class="price-option"><span class="price-label">5ml - <span class="price-value">$${price5ml}</span></span><button class="price-add-btn" data-id="${product.id}" data-size="5ml" data-price="${price5ml}">Agregar al Carrito</button></div>`;
            }
            if (price10ml > 0) {
                pricingHTML += `<div class="price-option"><span class="price-label">10ml - <span class="price-value">$${price10ml}</span></span><button class="price-add-btn" data-id="${product.id}" data-size="10ml" data-price="${price10ml}">Agregar al Carrito</button></div>`;
            }
            if (!pricingHTML) {
                const whatsappMessage = encodeURIComponent(`Hola AroMista, me interesa el decant ${product.name} y quisiera consultar su precio y disponibilidad.`);
                pricingHTML = `<a href="https://wa.me/${WHATSAPP_NUMBER}?text=${whatsappMessage}" target="_blank" class="btn btn-whatsapp-inquiry"><i class="fab fa-whatsapp"></i> Consultar Precio</a>`;
            }
            
            const carouselImages = (product.images && product.images.length > 0) ? product.images : [''];
            
            productDetailView.innerHTML = `
                <div class="container page-view">
                    <a href="#" class="back-to-products"><i class="fas fa-arrow-left"></i> Volver a Decants</a>
                    <div class="product-detail-layout">
                        <div class="product-carousel">
                             <div class="carousel-container">${carouselImages.map(img => `<div class="carousel-slide" style="--bg-img: url('${img}')"><img src="${img}" alt="${product.name}"></div>`).join('')}</div>
                        </div>
                        <div>
                            <h2 class="product-detail-title">${product.name}</h2>
                            <p class="product-detail-description">${(product.description || 'Descripción no disponible.').replace(/\n/g, '<br>')}</p>
                            <div class="product-pricing">${pricingHTML}</div>
                        </div>
                    </div>
                </div>`;
        }

        function addToCart(productId, size, price) {
            const cartId = `${productId}-${size}`;
            const existingItem = cart.find(item => item.cartId === cartId);
            const product = products.find(p => p.id == productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    cartId: cartId, id: productId, name: product.name, size: `${size}ml`,
                    price: price, quantity: 1, image: (product.images && product.images[0]) ? product.images[0] : ''
                });
            }
            updateCart();
            showNotification(`${product.name} (${size}ml) agregado`);
        }

        function updateCart() {
            saveCartToLocalStorage();
            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="placeholder">Tu carrito está vacío</p>';
                cartTotal.textContent = '0.00';
                return;
            }
            let total = 0;
            cartItems.innerHTML = cart.map(item => {
                total += item.price * item.quantity;
                return `
                <div class="cart-item" data-cart-id="${item.cartId}">
                    <img src="${item.image}" alt="${item.name}" style="width:50px; height:50px; border-radius:4px; object-fit:cover;">
                    <div class="cart-item-info">
                        <p class="cart-item-title">${item.name}</p>
                        <p class="cart-item-size">${item.size} - $${item.price.toFixed(2)}</p>
                    </div>
                    <div style="display:flex; align-items:center; gap: 10px;">
                        <button onclick="updateQuantity('${item.cartId}', -1)" style="padding: 2px 8px; cursor:pointer; border:1px solid var(--primary); background:transparent; color: var(--primary); border-radius: 50%; width: 24px; height: 24px;">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity('${item.cartId}', 1)" style="padding: 2px 8px; cursor:pointer; border:1px solid var(--primary); background:transparent; color: var(--primary); border-radius: 50%; width: 24px; height: 24px;">+</button>
                    </div>
                </div>`;
            }).join('');
            cartTotal.textContent = total.toFixed(2);
        }

        function updateQuantity(cartId, change) {
            const itemIndex = cart.findIndex(i => i.cartId === cartId);
            if (itemIndex > -1) {
                cart[itemIndex].quantity += change;
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }
            }
            updateCart();
        }

        function showNotification(message) {
            const el = document.createElement('div');
            el.className = `notification`;
            el.textContent = message;
            document.body.appendChild(el);
            setTimeout(() => { el.classList.add('show'); }, 10);
            setTimeout(() => { el.classList.remove('show'); setTimeout(() => el.remove(), 300); }, 2000);
        }

        document.addEventListener('click', function(e) {
            if (e.target.matches('.price-add-btn')) {
                const { id, size, price } = e.target.dataset;
                addToCart(id, size, parseFloat(price));
            }
        });

        window.addEventListener('DOMContentLoaded', () => { loadCartFromLocalStorage(); fetchProducts(); updateCart(); });
        window.addEventListener('hashchange', handleRouteChange);
        cartBtn.addEventListener('click', () => cartOverlay.classList.add('active'));
        closeCart.addEventListener('click', () => cartOverlay.classList.remove('active'));
        checkoutBtn.addEventListener('click', () => {
             const message = "Hola AroMista! Quisiera confirmar mi pedido de decants:\n\n" + cart.map(item => `- ${item.name} (${item.size}) x${item.quantity}`).join('\n') + `\n\nTotal: $${cartTotal.textContent}`;
             window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
        });
        
        function toggleFAQ(element) {
            element.closest('.faq-item').classList.toggle('active');
        }
    </script>
</body>
</html>