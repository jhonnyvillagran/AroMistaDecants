<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AroMista Decants - Muestras de Perfumes Originales</title>
    <meta name="description" content="Prueba antes de comprar. Decants y muestras de perfumes de lujo y nicho en Uruguay. Fragancias 100% originales en prácticos atomizadores de viaje.">
    <meta name="keywords" content="decants, muestras, perfumes, fragancias, perfumería, online, lujo, uruguay, probar perfume, atomizador, viaje">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #D4AF37; --primary-dark: #B8941F; --secondary: #8B4B8C; --accent: #E6B800; --dark: #1A1A1A;
            --darker: #0F0F0F; --light: #F5F5F5; --success: #228B22; --warning: #DAA520; --danger: #8B0000;
            --transition: all 0.3s ease; --shadow: 0 0 15px rgba(212, 175, 55, 0.3); --shadow-lg: 0 0 25px rgba(212, 175, 55, 0.5);
            --border-radius: 8px; --bg-primary: #1A1A1A; --bg-secondary: #2A2A2A; --text-primary: #F5F5F5; --text-secondary: #C0C0C0;
        }
        html { scroll-behavior: smooth; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: var(--text-primary); background-color: var(--bg-primary); overflow-x: hidden; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        .btn { display: inline-block; padding: 12px 24px; border: none; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); text-align: center; font-size: 1rem; position: relative; overflow: hidden; box-shadow: var(--shadow); }
        .btn::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); transition: 0.5s; }
        .btn:hover::before { left: 100%; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: var(--dark); border: 1px solid var(--primary); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .header { position: fixed; top: 0; left: 0; width: 100%; background-color: rgba(26, 26, 26, 0.95); box-shadow: var(--shadow); z-index: 1000; padding: 15px 0; backdrop-filter: blur(10px); border-bottom: 1px solid rgba(212, 175, 55, 0.3); }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo-img { height: 50px; width: 50px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); }
        .nav ul { display: flex; gap: 30px; align-items: center; }
        .nav a { font-weight: 600; position: relative; padding: 5px 0; color: var(--text-primary); transition: color 0.3s; }
        .nav a:hover, .footer-links a:hover { color: var(--primary); text-shadow: 0 0 8px rgba(212, 175, 55, 0.7); }
        .nav a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: linear-gradient(90deg, var(--primary), var(--secondary)); transition: var(--transition); }
        .nav a:hover::after { width: 100%; }
        .nav .dropdown { position: relative; display: inline-block; }
        .nav .dropdown .dropbtn { cursor: pointer; }
        .nav .dropdown .dropbtn i { margin-left: 5px; font-size: 0.8em; transition: transform 0.3s ease; }
        .nav .dropdown-content { display: none; position: absolute; background-color: var(--bg-secondary); min-width: 180px; box-shadow: var(--shadow); z-index: 1; border-radius: var(--border-radius); border: 1px solid rgba(212, 175, 55, 0.2); margin-top: 10px; overflow: hidden; }
        .nav .dropdown-content a { color: var(--text-secondary); padding: 12px 16px; display: block; font-weight: 500; }
        .nav .dropdown-content a:hover { background-color: var(--dark); color: var(--primary); }
        .nav .dropdown-content a::after { display: none; }
        .nav .dropdown:hover .dropdown-content { display: block; animation: fadeIn 0.3s ease; }
        .nav .dropdown:hover .dropbtn i { transform: rotate(180deg); }
        .nav .dropdown:hover > a::after { width: 100%; }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .cart-btn { background: none; border: none; font-size: 1.3rem; cursor: pointer; position: relative; color: var(--text-primary); transition: var(--transition); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(212, 175, 55, 0.3); }
        .cart-btn:hover { color: var(--dark); background: linear-gradient(135deg, var(--primary), var(--primary-dark)); transform: scale(1.1); box-shadow: var(--shadow-lg); }
        .cart-count { position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; font-size: 0.7rem; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 1px solid var(--dark); }
        .mobile-menu-btn { display: none; background: none; border: none; color: var(--text-primary); font-size: 1.5rem; cursor: pointer; z-index: 1100; }
        .close-nav-btn { display: none; }
        .main-content { padding-top: 80px; }
        .hero { min-height: 600px; height: 100vh; background-color: var(--darker); display: flex; align-items: center; justify-content: center; text-align: center; color: white; margin-top: -80px; }
        .hero-content { max-width: 700px; padding: 0 20px; z-index: 2; }
        .hero-title { font-size: 3rem; margin-bottom: 15px; text-shadow: 0 0 15px rgba(212, 175, 55, 0.7); font-weight: 800; background: linear-gradient(90deg, var(--primary), var(--secondary)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .hero-subtitle { font-size: 1.3rem; margin-bottom: 25px; font-weight: 500; color: var(--light); line-height: 1.4; }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 50px; position: relative; color: var(--text-primary); font-weight: 700; text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); padding-top: 80px;}
        .section-title::after { content: ''; position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); width: 80px; height: 4px; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 2px; }
        .about, .products, .page-view { padding: 80px 0; }
        .about-content { text-align: center; max-width: 800px; margin: 0 auto; color: var(--text-secondary); line-height: 1.8;}
        .about-content p { margin-bottom: 20px; }
        .about-content a { color: var(--primary); font-weight: 600; text-decoration: none; border-bottom: 1px solid var(--primary); transition: var(--transition); }
        .about-content a:hover { color: var(--light); border-bottom-color: var(--light); }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: var(--bg-secondary); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); transition: var(--transition); border: 1px solid rgba(212, 175, 55, 0.2); display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); }
        .product-image-container { height: 300px; position: relative; background-color: var(--darker); overflow: hidden; display:flex; align-items:center; justify-content:center; }
        .product-image-container img { width: 100%; height: 100%; object-fit: contain; }
        .product-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-title { font-size: 1.3rem; margin-bottom: 10px; }
        .product-description { color: var(--text-secondary); margin-bottom: 15px; font-size: 0.9rem; flex-grow: 1; }
        .product-price { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-top: auto; padding-top: 15px; }
        .product-actions { margin-top: 15px; }
        .price-inquiry-text { font-size: 1.2rem; font-weight: 600; text-align: center; padding: 10px 0; background: linear-gradient(90deg, var(--secondary), var(--primary-dark)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .page-content { background: var(--bg-secondary); padding: 40px; border-radius: var(--border-radius); border: 1px solid rgba(212,175,55,0.2); }
        .page-content p, .page-content ul { margin-bottom: 15px; line-height: 1.8; color: var(--text-secondary); }
        .page-content li { margin-left: 20px; list-style: disc; }
        .faq-item { margin-bottom: 20px; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--border-radius); overflow: hidden; }
        .faq-question { background: var(--dark); padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .faq-question:hover { background: rgba(212, 175, 55, 0.1); }
        .faq-question h4 { color: var(--primary); font-size: 1.1rem; margin: 0; }
        .faq-icon { color: var(--primary); transition: transform 0.3s ease; }
        .faq-answer { padding: 0 20px; max-height: 0; overflow: hidden; transition: all 0.4s ease-out; background: var(--bg-secondary); }
        .faq-item.active .faq-answer { padding: 20px; max-height: 350px; }
        .faq-item.active .faq-icon { transform: rotate(180deg); }
        .cart-overlay, .details-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; z-index: 2000; opacity: 0; visibility: hidden; transition: var(--transition); }
        .cart-overlay { justify-content: flex-end; }
        .details-overlay { align-items: center; justify-content: center; }
        .cart-overlay.active, .details-overlay.active { opacity: 1; visibility: visible; }
        .cart { background: var(--bg-primary); width: 100%; max-width: 450px; height: 100%; display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.3s ease; box-shadow: -5px 0 25px rgba(212, 175, 55, 0.3); border-left: 1px solid rgba(212, 175, 55, 0.3); }
        .cart-overlay.active .cart { transform: translateX(0); }
        .cart-header, .details-header { padding: 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); display: flex; justify-content: space-between; align-items: center; }
        .close-cart, .close-details { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-primary); }
        .cart-items { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-item { display: flex; gap: 15px; padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.1); align-items: center; }
        .cart-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: var(--border-radius); flex-shrink: 0; }
        .cart-item-details { flex: 1; }
        .cart-item-info { display: flex; justify-content: space-between; }
        .cart-item-title { font-weight: 600; margin-bottom: 5px; }
        .cart-item-price { color: var(--primary); font-weight: 700; }
        .remove-item { background: none; border: none; color: var(--danger); cursor: pointer; font-size: 1rem; }
        .cart-item-actions { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
        .quantity-btn { width: 30px; height: 30px; border: 1px solid var(--text-secondary); background: var(--bg-secondary); cursor: pointer; border-radius: 50%; color: white; }
        .cart-footer { padding: 20px; border-top: 1px solid rgba(212, 175, 55, 0.3); }
        .cart-total { font-size: 1.3rem; margin-bottom: 20px; text-align: right; font-weight: 700; }
        .whatsapp-info { background: rgba(37, 211, 102, 0.1); border: 1px solid #25D366; border-radius: var(--border-radius); padding: 15px; margin-bottom: 20px; }
        .whatsapp-info p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; text-align: center; }
        .whatsapp-info i { color: #25D366; margin-right: 8px; }
        .details-panel { background: var(--bg-primary); width: 100%; max-width: 420px; border-radius: var(--border-radius); transform: scale(0.8); transition: transform 0.3s ease; box-shadow: 0 20px 50px rgba(212, 175, 55, 0.3); border: 1px solid rgba(212, 175, 55, 0.3); margin: 20px; }
        .details-overlay.active .details-panel { transform: scale(1); }
        .details-content { padding: 30px; max-height: 80vh; overflow-y: auto; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .form-group input { width: 100%; padding: 12px 15px; border: 1px solid rgba(212, 175, 55, 0.3); border-radius: var(--border-radius); background: var(--bg-secondary); color: var(--text-primary); }
        .form-group input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2); }
        .footer { background: var(--dark); padding: 40px 0 20px; text-align: center; border-top: 1px solid rgba(212, 175, 55, 0.2); }
        .footer-links { margin-bottom: 20px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .footer-links a { color: var(--text-secondary); transition: color 0.3s; }
        .footer-socials { margin-bottom: 25px; display: flex; justify-content: center; gap: 30px; }
        .footer-socials a { font-size: 1.8rem; color: var(--text-secondary); transition: var(--transition); }
        .footer-socials a:hover { color: var(--primary); transform: translateY(-3px); text-shadow: 0 0 8px rgba(212, 175, 55, 0.7); }
        .placeholder { color: #64748b; text-align: center; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; }
        .placeholder i { font-size: 2rem; margin-bottom: 10px; }
        .whatsapp-fab { position: fixed; bottom: 25px; left: 25px; z-index: 1001; }
        .whatsapp-fab a { display: flex; align-items: center; justify-content: center; background-color: #25D366; color: white; width: 60px; height: 60px; border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.4); font-size: 2.5rem; transition: all 0.3s ease; }
        .whatsapp-fab a:hover { transform: scale(1.1) rotate(10deg); box-shadow: 0 6px 16px rgba(0,0,0,0.5); }
        #curiosity-card-container { position: fixed; z-index: 1002; opacity: 0; transform: scale(0.9); transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; pointer-events: none; }
        #curiosity-card-container.visible { opacity: 1; transform: scale(1); }
        .curiosity-card { background-color: var(--darker); color: var(--text-secondary); padding: 15px; border-radius: var(--border-radius); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); border: 1px solid rgba(212, 175, 55, 0.3); width: 250px; font-size: 0.9rem; line-height: 1.4; font-style: italic; }
        .curiosity-card::before { content: "\f0eb"; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--primary); margin-right: 10px; font-size: 1rem; }
        .notification { position: fixed; bottom: 20px; right: 20px; background-color: var(--success); color: var(--dark); padding: 15px 25px; border-radius: var(--border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 3000; opacity: 0; transform: translateY(20px); transition: all 0.3s ease; }
        .notification.show { opacity: 1; transform: translateY(0); }
        .notification.error { background-color: var(--danger); color: white; }
        .notification.warning { background-color: var(--warning); color: var(--dark);}
        @media (max-width: 768px) {
            .nav { position: fixed; top: 0; left: 0; width: 85%; max-width: 320px; height: 100%; background-color: var(--bg-primary); box-shadow: 5px 0 20px rgba(0,0,0,0.5); transform: translateX(-100%); transition: transform 0.3s ease-in-out; z-index: 5000; padding-top: 60px; }
            .nav.active { transform: translateX(0); }
            .nav ul { display: flex; flex-direction: column; align-items: flex-start; gap: 0; }
            .nav li { width: 100%; border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
            .nav a { padding: 18px 25px; display: block; width: 100%; }
            .nav .dropdown-content { display: none; position: static; background-color: var(--dark); box-shadow: none; border: none; border-radius: 0; width: 100%; max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out; }
            .nav .dropdown.active .dropdown-content { display: block; max-height: 500px; }
            .nav .dropdown.active .dropbtn i { transform: rotate(180deg); }
            .nav .dropdown-content a { padding-left: 45px; color: var(--text-secondary); font-size: 0.95em; }
            .mobile-menu-btn { display: block; }
            .close-nav-btn { display: block; position: absolute; top: 10px; right: 20px; background: none; border: none; font-size: 2.5rem; color: var(--text-primary); cursor: pointer; }
            .hero-title { font-size: 2.5rem; }
            .hero-subtitle { font-size: 1.2rem; }
            .section-title { font-size: 2rem; padding-top: 60px; }
            .cart { max-width: 100%; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="#inicio" class="logo"><img src="Logo.png" alt="AroMista Decants Logo" class="logo-img"></a>
            <nav class="nav" id="main-nav">
                <button class="close-nav-btn" id="close-nav-btn">&times;</button>
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li class="dropdown">
                        <a href="#productos" class="dropbtn nav-link-products">Productos <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a class="dropdown-item" href="#/productos/arabes">Árabes</a>
                            <a class="dropdown-item" href="#/productos/diseno">Diseño</a>
                            <a class="dropdown-item" href="#/productos/hombres">Hombres</a>
                            <a class="dropdown-item" href="#/productos/mujeres">Mujeres</a>
                            <hr class="dropdown-divider" style="border-color: rgba(212, 175, 55, 0.2);">
                            <a class="dropdown-item" href="#productos">Ver Todos</a>
                        </div>
                    </li>
                    <li><a href="#nosotros">Nosotros</a></li>
                    <li><a href="#faq">FAQ</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button class="cart-btn" id="cart-btn" aria-label="Carrito de compras">
                    <i class="fas fa-shopping-cart"></i><span class="cart-count">0</span>
                </button>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Abrir menú"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <main class="main-content">
        <section id="inicio" class="hero">
            <div class="hero-content">
                <h2 class="hero-title">AROMISTA DECANTS</h2>
                <p class="hero-subtitle">Prueba antes de comprar. Muestras de perfumes de lujo 100% originales, entregados en tu puerta.</p>
                <a href="#productos" class="btn btn-primary">Ver Decants</a>
            </div>
        </section>
        
        <section id="nosotros" class="about">
            <div class="container">
                <h2 class="section-title">Sobre AroMista Decants</h2>
                <div class="about-content">
                    <p>Nacimos de la misma pasión por las fragancias que nuestro sitio principal, AroMista. Nuestra misión es hacer que la alta perfumería sea accesible para todos en Uruguay, permitiéndote explorar un mundo de aromas sin límites.</p>
                    <p>Si deseas explorar nuestra colección completa de botellas selladas, te invitamos a visitar nuestra <a href="https://armomista.netlify.app/" target="_blank" rel="noopener noreferrer">tienda principal</a>.</p>
                </div>
            </div>
        </section>
        
        <section id="productos" class="products">
            <div class="container">
                <h2 class="section-title">Nuestros Decants</h2>
                <div class="products-grid" id="products-container"></div>
            </div>
        </section>

        <section id="faq" class="page-view">
            <div class="container">
                 <h2 class="section-title">Preguntas Frecuentes</h2>
                <div class="page-content" id="faq-container">
                    <div class="faq-item">
                        <div class="faq-question"><h4>🤔 ¿Qué es exactamente un decant?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><p>Un decant es una muestra de perfume 100% original. Extraemos con cuidado la fragancia de su botella oficial y la transferimos a un atomizador de vidrio más pequeño. No es una imitación, es el perfume auténtico.</p></div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question"><h4>💯 ¿Los perfumes son originales?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><p><strong>Absolutamente.</strong> Garantizamos que cada gota de nuestros decants proviene de la botella original. Nuestra reputación se basa en la autenticidad.</p></div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question"><h4>⭐ ¿Ventajas de comprar un decant?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><ul><li><strong>Probar antes de comprar:</strong> Usa el perfume varios días para ver cómo se adapta a tu piel antes de invertir en la botella grande.</li><li><strong>Variedad y Ahorro:</strong> Te permite tener una gran colección de fragancias de lujo por una fracción del costo.</li><li><strong>Portabilidad:</strong> Los atomizadores son perfectos para viajar o llevar en el bolso.</li></ul></div>
                    </div>
                     <div class="faq-item">
                        <div class="faq-question"><h4>📅 ¿Qué días se realizan los envíos?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><p>Los envíos se realizan los días <strong>martes, viernes y sábados por la mañana</strong> para garantizar un servicio rápido y eficiente.</p></div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question"><h4>⏰ ¿Hasta cuándo puedo confirmar mi pedido?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><p>Si confirmás el pago hasta el día anterior antes de las 15:30, tu pedido entra en el próximo envío.</p></div>
                    </div>
                     <div class="faq-item">
                        <div class="faq-question"><h4>💳 ¿Qué formas de pago aceptan?</h4><i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer"><p>Aceptamos pagos por: Prex, Oca Blue, Mi Dinero, Mercado Pago y transferencia bancaria.</p></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="cart-overlay" id="cart-overlay">
        <div class="cart">
            <div class="cart-header"><h3>Tu Carrito</h3><button class="close-cart" id="close-cart">&times;</button></div>
            <div class="cart-items" id="cart-items"></div>
            <div class="cart-footer">
                <div class="whatsapp-info"><p><i class="fab fa-whatsapp"></i> Al finalizar, confirmarás tu pedido por WhatsApp.</p></div>
                <div class="cart-total"><strong>Total: $<span id="cart-total">0.00</span></strong></div>
                <div class="cart-actions"><button class="btn btn-primary" id="checkout-btn" style="width:100%;">Proceder al Pago</button></div>
            </div>
        </div>
    </div>
    
    <div class="details-overlay" id="details-overlay">
        <div class="details-panel">
            <div class="details-header"><h3>Completa tus Datos de Envío</h3><button class="close-details" id="close-details">&times;</button></div>
            <div class="details-content">
                <form id="shipping-form">
                    <div class="form-group"><label for="shipping-name">Nombre Completo:</label><input type="text" id="shipping-name" required></div>
                    <div class="form-group"><label for="shipping-email">Email:</label><input type="email" id="shipping-email" required></div>
                    <div class="form-group"><label for="shipping-cedula">Cédula:</label><input type="text" id="shipping-cedula" required></div>
                    <div class="form-group"><label for="shipping-direccion">Dirección de Envío:</label><input type="text" id="shipping-direccion" required></div>
                    <div class="form-group"><label for="shipping-agencia">Agencia de Preferencia:</label><input type="text" id="shipping-agencia" required></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Guardar y Pagar</button>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-socials">
                <a href="https://www.instagram.com/aromista.uy/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/Aromista.uy/" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
            </div>
            <div class="footer-links">
                <a href="https://armomista.netlify.app/">Tienda Principal</a>
                <a href="#faq">Preguntas Frecuentes</a>
            </div>
            <p>© 2025 AroMista Decants. Todos los derechos reservados.</p>
        </div>
    </footer>
    
    <div class="whatsapp-fab">
        <a href="https://wa.me/59894991600?text=Hola%20AroMista%20Decants%2C%20quisiera%20hacer%20una%20consulta." target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
    </div>

    <div id="curiosity-card-container">
        <div class="curiosity-card"><p class="card-text"></p></div>
    </div>

    <script>
        const SCRIPT_URL = 'TU_URL_DEL_SCRIPT_AQUI';
        const WHATSAPP_NUMBER = '59894991600';

        let products = [];
        let cart = [];
        let customerDetails = null;
        
        const productsContainer = document.getElementById('products-container');
        const cartBtn = document.getElementById('cart-btn');
        const cartOverlay = document.getElementById('cart-overlay');
        const closeCart = document.getElementById('close-cart');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.querySelector('.cart-count');
        const checkoutBtn = document.getElementById('checkout-btn');
        const mainNav = document.getElementById('main-nav');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeNavBtn = document.getElementById('close-nav-btn');
        const detailsOverlay = document.getElementById('details-overlay');
        const closeDetails = document.getElementById('close-details');
        const shippingForm = document.getElementById('shipping-form');

        const getPrice = (item) => {
            const priceValue = item.price || item.Price || item.precio;
            if (priceValue === null || priceValue === undefined || priceValue === '') return 0;
            if (typeof priceValue === 'number') return priceValue;
            const numericValue = parseFloat(String(priceValue).replace(/[^0-9,.]/g, '').replace(',', '.'));
            return isNaN(numericValue) ? 0 : numericValue;
        };

        async function fetchProducts() {
            try {
                productsContainer.innerHTML = `<p class="placeholder" style="grid-column: 1 / -1;"><i class="fas fa-spinner fa-spin"></i> Cargando decants...</p>`;
                const response = await fetch(SCRIPT_URL);
                if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);
                const data = await response.json();
                if(!Array.isArray(data)) throw new Error("Los datos recibidos no son válidos.");
                products = data;
                handleRouteChange(); // Render products based on initial URL hash
            } catch (error) {
                console.error('Error fetching products:', error);
                productsContainer.innerHTML = `<p class='placeholder' style='grid-column: 1 / -1;'><i class="fas fa-exclamation-triangle"></i> No se pudieron cargar los decants. Revisa la URL del script.</p>`;
            }
        }
        
        function renderProducts(productsToRender) {
            productsContainer.innerHTML = '';
            if (productsToRender.length === 0) {
                productsContainer.innerHTML = `<p class="placeholder" style="grid-column: 1 / -1;">No se encontraron decants para esta categoría.</p>`;
                return;
            }

            productsToRender.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                const productImage = (product.images && product.images[0]) ? product.images[0] : 'https://i.imgur.com/h33p5I8.png';
                const productPrice = getPrice(product);

                productCard.innerHTML = `
                    <div class="product-image-container"><img src="${productImage}" alt="${product.name}" loading="lazy"></div>
                    <div class="product-info">
                        <div><h3 class="product-title">${product.name}</h3><p class="product-description">${product.description}</p></div>
                        <div class="product-actions">
                            ${productPrice > 0 ? 
                                \`<div class="product-price">$ \${productPrice.toFixed(2)}</div>
                                 <button class="btn btn-primary" style="width:100%; margin-top:10px;" data-id="\${product.id}">Agregar al Carrito</button>\` : 
                                \`<div class="price-inquiry-text" data-id="\${product.id}">Consultar Precio</div>\`
                            }
                        </div>
                    </div>`;
                
                const actionElement = productCard.querySelector('[data-id]');
                if (actionElement) {
                    actionElement.addEventListener('click', (e) => {
                        e.stopPropagation();
                        addToCart(product.id);
                    });
                }
                productsContainer.appendChild(productCard);
            });
        }

        function handleRouteChange() {
            const hash = location.hash;
            if (hash.startsWith('#/productos/')) {
                const category = hash.split('/')[2];
                const filteredProducts = products.filter(p => {
                    if (!p.Categoría) return false;
                    const productCategories = p.Categoría.toLowerCase().normalize("NFD").replace(/[^\w\s,]/g, "").split(',').map(c => c.trim());
                    let searchSlug = category.replace(/-/g, ' ');
                    if (searchSlug === 'hombres') searchSlug = 'hombre';
                    if (searchSlug === 'mujeres') searchSlug = 'mujer';
                    if (searchSlug === 'arabes') searchSlug = 'arabe';
                    return productCategories.some(prodCat => prodCat.includes(searchSlug));
                });
                renderProducts(filteredProducts);
            } else {
                renderProducts(products);
            }
        }

        function updateCart() {
            localStorage.setItem('aroMistaDecantsCart', JSON.stringify(cart));
            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="placeholder">Tu carrito está vacío</p>';
                cartTotal.textContent = '0.00';
                return;
            }
            let total = 0;
            cartItems.innerHTML = cart.map(item => {
                const price = getPrice(item);
                total += price * item.quantity;
                const itemImage = (item.images && item.images[0]) ? item.images[0] : 'https://i.imgur.com/h33p5I8.png';
                return \`
                    <div class="cart-item" data-id="\${item.id}">
                        <img src="\${itemImage}" class="cart-item-image" alt="\${item.name}">
                        <div class="cart-item-details">
                            <div class="cart-item-info">
                                <span class="cart-item-title">\${item.name}</span>
                                <button class="remove-item" title="Eliminar">&times;</button>
                            </div>
                             <p class="cart-item-price">\${price > 0 ? '$' + price.toFixed(2) : 'A consultar'}</p>
                            <div class="cart-item-actions">
                                <button class="quantity-btn decrease">-</button>
                                <span>\${item.quantity}</span>
                                <button class="quantity-btn increase">+</button>
                            </div>
                        </div>
                    </div>\`;
            }).join('');
            cartTotal.textContent = total.toFixed(2);
        }

        function addToCart(productId) {
            const product = products.find(p => p.id == productId);
            if (!product) return;
            const existingItem = cart.find(item => item.id == productId);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            updateCart();
            showNotification(\`\${product.name} agregado al carrito\`);
        }

        function handleCartActions(e) {
            const itemEl = e.target.closest('.cart-item');
            if (!itemEl) return;
            const id = itemEl.dataset.id;
            const itemInCart = cart.find(item => item.id == id);
            if (!itemInCart) return;

            if (e.target.classList.contains('increase')) itemInCart.quantity++;
            else if (e.target.classList.contains('decrease')) {
                itemInCart.quantity--;
                if (itemInCart.quantity <= 0) cart = cart.filter(item => item.id != id);
            } else if (e.target.classList.contains('remove-item')) {
                cart = cart.filter(item => item.id != id);
            }
            updateCart();
        }

        function checkout() {
            if (cart.length === 0) {
                showNotification('Tu carrito está vacío.', 'warning');
                return;
            }
            detailsOverlay.classList.add('active');
        }

        async function saveShippingDetails(e) {
            e.preventDefault();
            const details = {
                action: 'registerUser', name: document.getElementById('shipping-name').value, email: document.getElementById('shipping-email').value,
                cedula: document.getElementById('shipping-cedula').value, direccion: document.getElementById('shipping-direccion').value,
                agencia: document.getElementById('shipping-agencia').value
            };
            
            showNotification('Guardando tus datos...', 'warning');
            
            try {
                await fetch(SCRIPT_URL, {
                    method: 'POST', mode: 'no-cors',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(details)
                });
                customerDetails = details;
                localStorage.setItem('aroMistaCustomerDetails', JSON.stringify(details));
                showNotification('Datos guardados.', 'success');
                detailsOverlay.classList.remove('active');
                redirectToWhatsApp();
            } catch (error) { 
                console.error('Error saving details:', error);
                showNotification('No se pudieron guardar los datos.', 'error');
            }
        }

        function redirectToWhatsApp() {
            if (!customerDetails) {
                showNotification('Por favor, completa tus datos primero.', 'warning');
                detailsOverlay.classList.add('active');
                return;
            }
            let message = \`¡Hola AroMista Decants! Mi nombre es \${customerDetails.name}. Deseo confirmar el pedido:\\n\\n\`;
            const itemsWithPrice = cart.filter(item => getPrice(item) > 0);
            const itemsWithoutPrice = cart.filter(item => getPrice(item) === 0);
            if (itemsWithPrice.length > 0) {
                message += "Decants a comprar:\\n";
                message += itemsWithPrice.map(item => \`- \${item.name} (x\${item.quantity}) - $\${(getPrice(item) * item.quantity).toFixed(2)}\`).join('\\n');
                const total = itemsWithPrice.reduce((sum, item) => sum + getPrice(item) * item.quantity, 0);
                message += \`\\n\\n*Total a pagar: $\${total.toFixed(2)}*\`;
            }
            if (itemsWithoutPrice.length > 0) {
                message += "\\n\\nTambién consultar por:\\n";
                message += itemsWithoutPrice.map(item => \`- \${item.name} (x\${item.quantity})\`).join('\\n');
            }
            message += \`\\n\\n--- DATOS DE ENVÍO ---\\nCédula: \${customerDetails.cedula}\\nDirección: \${customerDetails.direccion}\\nAgencia: \${customerDetails.agencia}\`;
            window.open(\`https://wa.me/\${WHATSAPP_NUMBER}?text=\${encodeURIComponent(message)}\`, '_blank');
        }

        function handleFaqClick(e) {
            const question = e.target.closest('.faq-question');
            if (!question) return;
            const faqItem = question.parentElement;
            const currentlyActive = faqItem.classList.contains('active');
            document.querySelectorAll('#faq-container .faq-item').forEach(item => item.classList.remove('active'));
            if (!currentlyActive) {
                faqItem.classList.add('active');
            }
        }

        function showNotification(message, type = 'success') {
            const el = document.createElement('div');
            el.className = \`notification \${type}\`;
            el.textContent = message;
            document.body.appendChild(el);
            setTimeout(() => el.classList.add('show'), 10);
            setTimeout(() => {
                el.classList.remove('show');
                setTimeout(() => el.remove(), 300);
            }, 3000);
        }
        
        const curiosityFacts = [ "Un decant de 5ml ofrece ~70 sprays.", "Los decants son ideales para llevar en aviones.", "Probar en piel es la única forma real de conocer un perfume.", "Coleccionar decants te da una 'biblioteca de aromas' de lujo.", "Un atomizador de vidrio oscuro protege la fragancia de la luz." ];
        const curiosityCardContainer = document.getElementById('curiosity-card-container');
        const curiosityCardText = curiosityCardContainer.querySelector('.card-text');

        function showRandomFact() {
            const randomIndex = Math.floor(Math.random() * curiosityFacts.length);
            curiosityCardText.textContent = curiosityFacts[randomIndex];
            const positions = [ { top: '100px', left: '20px' }, { top: '100px', right: '20px' }, { bottom: '100px', left: '20px' }, { bottom: '100px', right: '20px' } ];
            const randomPosition = positions[Math.floor(Math.random() * positions.length)];
            Object.assign(curiosityCardContainer.style, { top: 'auto', bottom: 'auto', left: 'auto', right: 'auto', ...randomPosition });
            curiosityCardContainer.classList.add('visible');
            setTimeout(() => { curiosityCardContainer.classList.remove('visible'); }, 8000);
        }

        // --- EVENT LISTENERS ---
        window.addEventListener('DOMContentLoaded', () => {
            const savedCart = localStorage.getItem('aroMistaDecantsCart');
            if (savedCart) { try { cart = JSON.parse(savedCart) || []; } catch(e) { cart = []; } }
            const savedDetails = localStorage.getItem('aroMistaCustomerDetails');
            if (savedDetails) { try { customerDetails = JSON.parse(savedDetails); } catch(e) { customerDetails = null; } }
            fetchProducts();
            updateCart();
            if (curiosityFacts.length > 0) {
                setTimeout(showRandomFact, 5000);
                setInterval(showRandomFact, 20000);
            }
        });

        window.addEventListener('hashchange', handleRouteChange);
        cartBtn.addEventListener('click', () => cartOverlay.classList.add('active'));
        closeCart.addEventListener('click', () => cartOverlay.classList.remove('active'));
        cartItems.addEventListener('click', handleCartActions);
        checkoutBtn.addEventListener('click', checkout);
        closeDetails.addEventListener('click', () => detailsOverlay.classList.remove('active'));
        shippingForm.addEventListener('submit', saveShippingDetails);
        mobileMenuBtn.addEventListener('click', () => mainNav.classList.add('active'));
        closeNavBtn.addEventListener('click', () => mainNav.classList.remove('active'));
        mainNav.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && mainNav.classList.contains('active')) {
                mainNav.classList.remove('active');
            }
        });
        document.getElementById('faq-container').addEventListener('click', handleFaqClick);
        document.querySelector('.nav-link-products').addEventListener('click', () => {
             if (location.hash.startsWith('#/productos/')) {
                location.hash = '#productos';
                renderProducts(products);
            }
        });
        const dropdown = document.querySelector('.nav .dropdown .dropbtn');
        dropdown.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                e.preventDefault();
                dropdown.parentElement.classList.toggle('active');
            }
        });
    </script>
</body>
</html>